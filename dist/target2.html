<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SURVEY - ììœ¨êµìœ¡ê³¼ì •</title>

    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="stylesheet.css">

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <style>
      body {
        font-family: "Segoe UI", sans-serif;
        padding: 30px;
        background-color: #f0f2f5;
      }

      h2 {
        text-align: center;
        margin-bottom: 40px;
        font-size: 24px;
        color: #333;
      }

      .chart-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 30px;
        max-width: 1100px;
        margin: 0 auto;
      }

      .chart-card {
        background: #ffffff;
        border-radius: 12px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        padding: 25px 20px 10px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .chart-card h3 {
        text-align: center;
        font-size: 16px;
        margin-bottom: 20px;
        color: #222;
      }

      .chart-box {
        height: 280px;
        width: 100%;
        margin: 0;
      }

       #content {
            margin-bottom: 40px;}
    </style>
    <script type="text/javascript">
      google.charts.load("current", { packages: ["corechart"] });
      google.charts.setOnLoadCallback(drawCharts);

      const questions = [
        { col: "B", title: "ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²€ìƒ‰ í”Œë«í¼ì€?" },
        { col: "C", title: "ì£¼ë¡œ ì‚¬ìš©í•˜ëŠ” SNSëŠ”?" },
        { col: "D", title: "íŠ¹ì • í”Œë«í¼ì„ ë°˜ë³µì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” í¸ì´ë‹¤" },
        { col: "E", title: "ì‚¬ìš©í•˜ë˜ í”Œë«í¼ì„ ë‹¤ë¥¸ ì„œë¹„ìŠ¤ë¡œ ë°”ê¾¸ëŠ” ê²ƒì´ ì–´ë µë‹¤ê³  ëŠê»´ì§„ë‹¤" },
        { col: "F", title: "ë§ì€ ë°ì´í„°ë¥¼ ê°€ì§„ ê¸°ì—…ì´ ì‹œì¥ì—ì„œ ë” ìœ ë¦¬í•˜ë‹¤ê³  ìƒê°í•œë‹¤" },
        { col: "G", title: "ëŒ€í˜• í”Œë«í¼ ê¸°ì—…ì˜ ì„œë¹„ìŠ¤ë¥¼ ëŒ€ì²´í•  ìˆ˜ ìˆëŠ” ê²ƒì´ ê±°ì˜ ì—†ë‹¤ê³  ëŠë‚€ë‹¤" },
        { col: "H", title: "ì„œë¹„ìŠ¤ê°€ ì¬ë¯¸ìˆê±°ë‚˜ ìœ ìš©í•˜ë‹¤ë©´ ì–´ëŠ ì •ë„ì˜ ê°œì¸ì •ë³´ëŠ” ì œê³µí•´ë„ ê´œì°®ë‹¤." },
        { col: "I", title: "ì•±ì„ ì„¤ì¹˜í–ˆì„ ë•Œ, ìœ„ì¹˜ë‚˜ ì—°ë½ì²˜ ë“±ì˜ ì ‘ê·¼ ê¶Œí•œì„ ìš”ì²­ë°›ìœ¼ë©´ ë¶ˆì•ˆí•˜ê²Œ ëŠê»´ì§„ë‹¤." },
        { col: "J", title: "ì„œë¹„ìŠ¤ ì œê³µ ì—…ì²´ê°€ ë‚´ ê°œì¸ì •ë³´ë¥¼ ì œëŒ€ë¡œ ë³´í˜¸í•˜ì§€ ì•Šì„ ê²ƒ ê°™ì•„ ë¶ˆì•ˆí•  ë•Œê°€ ìˆë‹¤." },
        { col: "K", title: "ì›¹ì‚¬ì´íŠ¸ì—ì„œ ì¿ í‚¤ ì‚¬ìš© ë™ì˜ë¥¼ ìš”ì²­í•˜ë©´ 'ëª¨ë‘ í—ˆìš©'ì„ ì„ íƒí•˜ëŠ” í¸ì´ë‹¤." },
        { col: "L", title: "ì‹ ë…ì  ê¸°ì—…ì˜ ê¸°ì—… ë¶„í• ì´ í•„ìš”í•˜ë‹¤" },
        { col: "M", title: "ì‹ ë…ì  ê¸°ì—…ë“¤ì˜ ì¸ìˆ˜í•©ë³‘ì— ì‚¬ì „ ì‹¬ì‚¬ë‚˜ ì œí•œì´ í•„ìš”í•˜ë‹¤" },
        { col: "N", title: "í”Œë«í¼ ë‚´ ìì‚¬ ì„œë¹„ìŠ¤ ìš°ëŒ€ë¥¼ ê¸ˆì§€í•´ì•¼ í•œë‹¤" },
        { col: "O", title: "ë°ì´í„° ì´ë™ê¶Œì„ ë²•ì œí™”í•´ì•¼ í•œë‹¤" },
      ];

      function drawCharts() {
        const grid = document.createElement("div");
        grid.className = "chart-grid";
        document.body.appendChild(grid);

        questions.forEach((q) => {
          const card = document.createElement("div");
          card.className = "chart-card";

          const title = document.createElement("h3");
          title.innerText = q.title;

          const chartDiv = document.createElement("div");
          chartDiv.className = "chart-box";
          chartDiv.id = `chart_${q.col}`;

          card.appendChild(title);
          card.appendChild(chartDiv);
          grid.appendChild(card);

          drawChart(q.col, chartDiv.id);
        });
      }

      function drawChart(column, elementId) {
        const sheetID = "1M7IqSzow__Wzx2G5jfithvCgzOB4cTN5pNYw2lG8heY";
        const sheetName = encodeURIComponent("ì‘ë‹µ");
        const queryString = encodeURIComponent(
          `SELECT ${column}, count(${column}) GROUP BY ${column} LABEL count(${column}) 'ì‘ë‹µ ìˆ˜'`
        );
        const url = `https://docs.google.com/spreadsheets/d/${sheetID}/gviz/tq?sheet=${sheetName}&tq=${queryString}`;

        const query = new google.visualization.Query(url);
        query.send((response) => {
          if (response.isError()) {
            document.getElementById(elementId).innerText =
              "ì˜¤ë¥˜ ë°œìƒ: " + response.getMessage();
            return;
          }

          const data = response.getDataTable();

          const chart = new google.visualization.PieChart(
            document.getElementById(elementId)
          );

          chart.draw(data, {
            title: "",
            pieHole: 0.3,
            legend: {
                position: "bottom",
                textStyle: {fontSize: 14}
            },
            chartArea: {
                width: "90%",
                height: "80%",  // ë†’ì´ ì¡°ì •
                top: 10,         // ìœ„ìª½ ì—¬ë°± í™•ë³´
                bottom: 30
            }
            });
        });
      }
    </script>
</head>
<body>
    <div id="page">
        <header>
            <div id="logo">
                <img src="/blackbox.png" alt="logo">
            </div>
            <nav>
                <ul>
                    <li><a href="/index.html">HOME</a></li>
                    <li><a href="/target1.html">INSTANCES</a></li>
                    <li><a href="/target2.html">SURVEY</a></li>
                    <li><a href="/target3.html">SOLUTIONS</a></li>
                </ul>
            </nav>
        </header>

        <article id="content">
            <section>
                <h1>ì„¤ë¬¸ ì°¸ì—¬</h1>
                <p>
                ì•„ë˜ ë§í¬ë¥¼ í´ë¦­í•˜ë©´ ì„¤ë¬¸ì— ì°¸ì—¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br><br>
                ğŸ‘‰ <a href="https://forms.gle/nfe6xvQYddgwVSWh6" target="_blank">ì„¤ë¬¸ í¼ ì—´ê¸°</a>
                </p>
            </section>
        </article>
    </div>
</body>
</html>
